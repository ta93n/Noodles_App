<div class="container">
  <aside class="col-md-4">
    <section class="user_info">
      <%= render 'shared/user_info' %>
      <%= render 'users/follow_form' if logged_in? %>
      <% if @user == current_user %>
        <%= link_to "投稿する", new_post_path, class: "btn btn-warning btn-lg btn-block" %>
      <% end %>
    </section>
  </aside>
  <div class="col-md-8">
    <section class="main_section">
      <ol class="posts">
        <li id="post-<%= @post.id %>">
          <div class="post_header" style="border-top: none;">
            <% if @post.user.image.to_s.empty? %>
              <%= link_to image_tag("/default_user.png"), @post.user %>
            <% else %>
              <%= link_to image_tag(@post.user.image.url), @post.user %>
            <% end %>
            <span><%= link_to @post.user.name, @post.user %> が食べたラーメン</span>
            <% if current_user?(@post.user) %>
              <div class="post_menu">
                <%= link_to "編集", edit_post_path(@post) %>　
                <%= link_to "削除", @post, method: :delete,
                                                   data: { confirm: "本当に削除しますか？" } %>
              </div>
            <% end %>
          </div>
          <div class="post_show">
            <div class="post_picture">
              <%= image_tag @post.picture.url if @post.picture? %>
            </div>
            <div class="post_information">
              <span class="shop_name">店名: <%= @post.shop_name %></span>
              <span class="nearest">最寄駅: <%= @post.nearest %></span>
              <span class="comment">説明文: <%= simple_format(@post.content) %></span>
              <div class="post_information_bottom">
                <span class="like"><%= render "likes/like", post: @post %></span>
                <span class="timestamp"><%= @post.created_at.strftime('%Y/%m/%d %H:%M') %>に投稿</span>
              </div>
            </div>
            <div class="post_map">
              <div id="map">
              </div>
            </div>
          </div>
        </li>
      </ol>
    </section>
  </div>
</div>

<script>
  let mapInstance
  function initMap(){
    mapInstance = new google.maps.Map(document.getElementById('map'), {
    center: {lat: -34.397, lng: 150.644}, // 地図の中心を指定
    zoom: 8 // 地図のズームを指定
    });
  }
</script>
<script src="https://maps.googleapis.com/maps/api/js?key=<%= Rails.application.credentials.GCP[:API_KEY] %>&callback=initMap" defer></script>
